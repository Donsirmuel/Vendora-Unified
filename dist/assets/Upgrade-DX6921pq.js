import{r as i,j as e,aw as F,aN as b,aW as B,bq as I}from"./vendor-C5ZIaFXU.js";import{L as W,B as m}from"./badge-CwdvftBL.js";import{t as Y,u as O,a as A,L as N,I as w,B as H,h as g}from"./main-BnmLXDMO.js";import{C as D,a as q,b as T,d as J,e as _}from"./charts_panel-CXTnZd3F.js";import{B as K}from"./BrandedEmptyState-Dd66voyI.js";import"./vendor-recharts-Bhh5Wr_H.js";function Q(a){const r=i.useRef(null),[c,t]=i.useState(!1);return i.useEffect(()=>{const l=Y.getAccessToken(),h="wss://api.vendora.page/ws/payment-requests/",f=l?[`jwt.${l}`]:void 0,o=new WebSocket(h,f);return r.current=o,o.onopen=()=>t(!0),o.onclose=()=>t(!1),o.onerror=()=>t(!1),o.onmessage=y=>{try{const s=JSON.parse(y.data);a(s)}catch{a(y.data)}},()=>{try{o.close()}catch{}r.current=null}},[a]),{connected:c,ws:r}}function re(){const{user:a}=O(),[r,c]=i.useState(null),[t,l]=i.useState(""),[n,x]=i.useState(!1),[h,f]=i.useState("monthly"),{toast:o}=A(),y=d=>{switch(d){case"monthly":return"Monthly plan";case"quarterly":return"3-month plan";case"semi-annual":return"6-month plan";case"annual":return"Annual plan";case"perpetual":return"Perpetual plan";case"none":case void 0:case null:return"Free plan";default:return String(d).replace(/-/g," ")}},s=a==null?void 0:a.subscription_status,E=s!=null&&s.is_trial?"Trial plan":y(s==null?void 0:s.plan),v=s!=null&&s.plan_expires_at?new Date(s.plan_expires_at).toLocaleDateString():null,P=s!=null&&s.trial_expires_at?new Date(s.trial_expires_at).toLocaleDateString():null,L=async d=>{if(d.preventDefault(),!r){o({title:"Upload a receipt",description:"Please attach a payment receipt file",variant:"destructive"});return}x(!0);try{const p=new FormData;p.append("receipt",r),p.append("note",t),await g.post("/api/v1/accounts/payment-requests/",p,{headers:{"Content-Type":"multipart/form-data"}}),o({title:"Submitted",description:"Your payment receipt was submitted and is pending review."}),(async()=>{let j=3e3;for(let C=0;C<10;C++){try{const u=await g.get("/api/v1/accounts/payment-requests/latest/");if(u.status===200&&u.data){const $=u.data;if($.status==="approved"){o({title:"Activated",description:"Your account has been activated by the admin."});break}if($.status==="rejected"){o({title:"Rejected",description:"Your payment request was rejected. Please contact support.",variant:"destructive"});break}}}catch{}await new Promise(u=>setTimeout(u,j)),j=Math.min(1e4,Math.round(j*1.6))}})()}catch{o({title:"Failed",description:"Could not submit receipt",variant:"destructive"})}finally{x(!1)}},M=d=>{switch(d){case"monthly":return"Monthly Plan - $22.99/month";case"quarterly":return"3-Month Plan - $68.97/3 months";case"semi-annual":return"6-Month Plan - $137.94/6 months";case"annual":return"Annual Plan - $275.88/year";default:return"Monthly Plan - $22.99/month"}},R=d=>{switch(d){case"monthly":return"$22.99";case"quarterly":return"$68.97";case"semi-annual":return"$137.94";case"annual":return"$275.88";default:return"$22.99"}},U=M(h),k=R(h),S=U.split(" - ")[0];return e.jsx(W,{title:"Upgrade",children:e.jsxs("div",{className:"space-y-10 pb-12",children:[e.jsx("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-primary/25 px-8 py-10 text-white shadow-xl shadow-primary/20",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{variant:"outline",className:"w-fit border-white/20 bg-white/10 uppercase tracking-[0.3em] text-xs text-primary/80",children:"Upgrade Hub"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h1",{className:"text-3xl font-semibold md:text-4xl",children:"Unlock unlimited orders"}),e.jsx("p",{className:"max-w-2xl text-sm text-slate-200 md:text-base",children:"Vendora Pro lifts daily order caps, unlocks Telegram bot automations, and adds richer analytics so you can focus on moving volume."}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs(m,{variant:"secondary",className:"bg-white/15 text-white hover:bg-white/20",children:["Current plan: ",E]}),v&&e.jsxs(m,{variant:"outline",className:"border-white/25 bg-black/20 text-white",children:["Renews ",v]}),(s==null?void 0:s.is_trial)&&P&&e.jsxs(m,{variant:"secondary",className:"bg-primary/25 text-white",children:["Trial ends ",P]})]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-slate-100 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",children:"Why vendors upgrade"})]}),e.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-slate-200/90",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Unlimited Telegram bot orders beyond the free plan’s 10-per-day cap."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Priority support plus roadmap input tailored to active desks."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Deeper analytics to spot rate spreads, buyer trends, and settlement speed."})]})]})]})]})}),e.jsxs(D,{className:"mx-auto max-w-5xl border border-border bg-gradient-card shadow-lg shadow-primary/10",children:[e.jsxs(q,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx(T,{className:"text-2xl font-semibold",children:"Choose your scale track"}),e.jsxs(m,{variant:"secondary",className:"bg-primary/15 text-primary",children:["Selected: ",k," • ",S]})]}),e.jsx(J,{children:"Pick the commitment window that matches your desk’s cadence. Every paid plan unlocks Telegram bot automations, unlimited orders, and premium support."})]}),e.jsxs(_,{className:"space-y-8",children:[e.jsx(V,{selectedPlan:h,onPlanSelect:f}),e.jsxs("div",{className:"rounded-2xl border border-border/70 bg-background/80 p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"Complete your upgrade"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay to the preferred destination, then upload your receipt so we can activate your plan."})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsx(X,{}),e.jsx(G,{}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"upgrade-receipt",className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Receipt"}),e.jsx(w,{id:"upgrade-receipt",type:"file",accept:"image/*,application/pdf",onChange:d=>{var p;return c(((p=d.target.files)==null?void 0:p[0])??null)},className:"bg-background border-border"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Upload a screenshot or PDF of your payment receipt."})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"upgrade-note",className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Note (optional)"}),e.jsx(w,{id:"upgrade-note",value:t,onChange:d=>l(d.target.value),className:"bg-background border-border"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Share any context for the payment review team."})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"upgrade-selected-plan",className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Selected plan"}),e.jsx(w,{id:"upgrade-selected-plan",value:`${S} (${k})`,readOnly:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(H,{type:"submit",disabled:n,className:"bg-gradient-primary px-6 py-2 text-sm font-medium hover:opacity-90",children:n?"Submitting…":"I have paid — submit receipt"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"We’ll notify you once an admin approves the upgrade."})]})]})]})]})]})]})]})})}function V({selectedPlan:a,onPlanSelect:r}){const c=[{id:"monthly",name:"Monthly Plan",price:"$22.99",period:"/month",description:"$0.75 per day • Stay flexible month-to-month",features:["Unlimited orders per day","Advanced rate management","Full Telegram bot","Priority support","Real-time notifications"],popular:!0},{id:"quarterly",name:"3-Month Plan",price:"$68.97",period:"/3 months",description:"Lock in savings each quarter",features:["Everything in Monthly","Quarterly commitment savings","Quarterly business reports"],popular:!1},{id:"semi-annual",name:"6-Month Plan",price:"$137.94",period:"/6 months",description:"Dial in mid-term runway",features:["Everything in Monthly","Semi-annual savings","Advanced analytics"],popular:!1},{id:"annual",name:"Annual Plan",price:"$275.88",period:"/year",description:"Stack the best savings all year",features:["Everything in Monthly","Annual commitment savings","Premium support & features","Annual business insights"],badge:"Best value"}];return e.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:c.map(t=>{const l=a===t.id;return e.jsxs(D,{className:`flex h-full flex-col justify-between border transition-all ${l?"border-primary bg-primary/5 shadow-lg shadow-primary/20":"hover:border-primary/40"} ${t.popular?"border-orange-500/70":""}`,onClick:()=>r(t.id),children:[e.jsxs(q,{className:"space-y-4 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(T,{className:"text-lg font-semibold",children:t.name}),e.jsxs("div",{className:"flex gap-2",children:[t.popular&&e.jsx(m,{className:"bg-orange-500 text-orange-50",children:"Popular"}),t.badge&&e.jsx(m,{className:"bg-emerald-500 text-emerald-50",children:t.badge}),l&&e.jsx(m,{variant:"secondary",className:"bg-primary/20 text-primary",children:"Selected"})]})]}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-bold text-primary",children:t.price}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.period})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),e.jsx(_,{className:"pt-0",children:e.jsx("ul",{className:"space-y-2 text-sm",children:t.features.map((n,x)=>e.jsxs("li",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("span",{className:"text-primary",children:"✓"}),e.jsx("span",{children:n})]},x))})})]},t.id)})})}function X(){const[a,r]=i.useState([]),{toast:c}=A();return i.useEffect(()=>{let t=!1;return(async()=>{try{const l=await g.get("/api/v1/accounts/global-payment-destinations/");t||r(l.data.results||l.data)}catch{c({title:"Failed to load payment options",description:"Could not fetch payment destinations",variant:"destructive"})}})(),()=>{t=!0}},[c]),!a||a.length===0?e.jsxs("div",{className:"rounded-xl border border-border bg-secondary/20 p-4 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Primary payment destinations"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"Fiat (NGN):"})," Access Bank • 1698607544 • Samuel Olaonipekun"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("strong",{children:"Crypto (USDT - TRC20):"})," TEKqMZauPyXpj6YCJnmfe37DSRPU93K1oX"]}),e.jsx("p",{className:"mt-3 text-xs uppercase tracking-wide text-muted-foreground",children:"Pro tip: Avoid crypto keywords in bank transfer narrations — your Vendora username works perfectly."})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Payment destinations"}),e.jsx("ul",{className:"space-y-3",children:a.map(t=>e.jsxs("li",{className:"rounded-2xl border border-border/60 bg-gradient-to-br from-background via-background to-primary/5 p-4 shadow-sm",children:[e.jsx("div",{className:"flex flex-wrap items-start justify-between gap-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:t.name}),e.jsx(m,{variant:"outline",className:"mt-1 uppercase tracking-wide text-xs",children:t.kind})]})}),e.jsx("p",{className:"mt-3 whitespace-pre-wrap text-sm leading-relaxed text-muted-foreground",children:t.details})]},t.id))})]})}function G(){const[a,r]=i.useState(null),c=i.useCallback(async()=>{try{const n=await g.get("/api/v1/accounts/payment-requests/latest/");n.status===200?r(n.data):r(null)}catch{r(null)}},[]),t=i.useCallback(n=>{Array.isArray(n)?r(n[n.length-1]):r(n||null)},[]),{connected:l}=Q(t);return i.useEffect(()=>{c()},[c]),i.useEffect(()=>{l&&c()},[l,c]),a?e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium",children:"Latest payment request"}),e.jsxs("div",{className:"mt-2 p-3 border rounded bg-muted/5",children:[e.jsxs("p",{className:"font-semibold",children:["Status: ",a.status]}),e.jsxs("p",{className:"text-sm",children:["Submitted: ",new Date(a.created_at).toLocaleString()]}),a.processed_at&&e.jsxs("p",{className:"text-sm",children:["Processed: ",new Date(a.processed_at).toLocaleString()," by ",a.processed_by||"admin"]}),a.note&&e.jsx("p",{className:"mt-2 whitespace-pre-wrap",children:a.note})]})]}):e.jsx(K,{icon:I,badge:"Activation in review",title:"No payment requests yet",description:"Upload your receipt after payment and our team will flip your plan live within minutes.",className:"bg-slate-950"})}export{re as default};
