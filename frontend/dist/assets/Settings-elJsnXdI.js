import{bi as Ee,r as n,j as e,bj as Te,bk as De,bl as be,bm as Me,bn as je,aH as C,aw as ue,bo as Ve,aN as X,bp as ze,bq as D,br as M,bs as qe,aL as pe,aK as xe,bt as Oe,bu as Z,ba as V,bv as he,bw as ge}from"./vendor-C5ZIaFXU.js";import{L as Ge,B as A}from"./badge-CwdvftBL.js";import{a as We,i as Ye,u as Ke,s as He,B as i,L as l,I as p,c as Qe,g as B,r as $e,p as Je,e as Xe,h as Ze,d as es}from"./main-BnmLXDMO.js";import{T as ee}from"./textarea-B39yKq_J.js";import{l as ss,a as ts,u as as,c as ns,d as is,b as rs,e as ls,f as os}from"./rates-DrUr7xMo.js";import{a as ds,F as cs}from"./FreePlanComponents-CbscB5Hd.js";import{c as I}from"./charts_panel-CXTnZd3F.js";import{B as fe}from"./BrandedEmptyState-Dd66voyI.js";import"./vendor-recharts-Bhh5Wr_H.js";const ms=Ee,ve=n.forwardRef(({className:a,...m},u)=>e.jsx(Te,{ref:u,className:I("border-b",a),...m}));ve.displayName="AccordionItem";const ye=n.forwardRef(({className:a,children:m,...u},h)=>e.jsx(De,{className:"flex",children:e.jsxs(be,{ref:h,className:I("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...u,children:[m,e.jsx(Me,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ye.displayName=be.displayName;const Ne=n.forwardRef(({className:a,children:m,...u},h)=>e.jsx(je,{ref:h,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...u,children:e.jsx("div",{className:I("pb-4 pt-0",a),children:m})}));Ne.displayName=je.displayName;const us={solid:"bg-card",muted:"bg-muted/50 dark:bg-muted/30",gradient:"bg-gradient-card"},x=({id:a,title:m,description:u,icon:h,children:y,tone:R="solid",containerClassName:N,bodyClassName:w})=>e.jsxs(ve,{value:a,className:I("rounded-xl border border-border shadow-sm transition hover:border-primary/40 focus-within:border-primary/60",us[R],N),children:[e.jsx(ye,{className:"px-4 py-3 text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold leading-5",children:m}),u&&e.jsx("span",{className:"text-xs text-muted-foreground leading-4",children:u})]})]})}),e.jsx(Ne,{className:"px-4",children:e.jsx("div",{className:I("space-y-4 text-sm",w),children:y})})]}),z=({title:a,description:m,children:u})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("header",{className:"space-y-1",children:[e.jsx("h2",{className:"text-base font-semibold tracking-tight text-foreground md:text-lg",children:a}),m&&e.jsx("p",{className:"text-sm text-muted-foreground",children:m})]}),e.jsx(ms,{type:"multiple",defaultValue:[],className:"space-y-3",children:u})]}),ws=()=>{const{toast:a}=We(),[m,u]=n.useState(""),[h,y]=n.useState(""),[R,N]=n.useState(""),[w,L]=n.useState(""),[j,se]=n.useState(()=>localStorage.getItem("vendora_theme")||"dark"),[v,te]=n.useState(!0),[we,ae]=n.useState(!1),[ne,P]=n.useState([]),[ie,F]=n.useState([]),[q,O]=n.useState(""),[G,W]=n.useState(""),[re,Y]=n.useState(!1),[o,g]=n.useState({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1}),[k,K]=n.useState(null),[d,f]=n.useState({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""}),[_,H]=n.useState(null),[U,ke]=n.useState(""),[E,_e]=n.useState(()=>typeof window<"u"?Ye():!1),[Q,le]=n.useState(()=>typeof window<"u"&&localStorage.getItem("vendora_can_install")==="1"),[$,Se]=n.useState(()=>{if(typeof window>"u")return!1;if(typeof navigator<"u"&&navigator.standalone)return!0;try{return window.matchMedia("(display-mode: standalone)").matches}catch{return!1}}),[S,oe]=n.useState(()=>typeof window>"u"||typeof Notification>"u"?"unsupported":Notification.permission),[T,de]=n.useState(!1),{user:J}=Ke();n.useEffect(()=>{(async()=>{try{te(!0);const t=await Qe();y(t.name||""),Y(!!t.auto_accept),N(t.bank_details||""),O(t.telegram_username||""),W(t.bio||""),t.avatar_url&&u(t.avatar_url),t.bot_link&&ke(t.bot_link),L(typeof t.auto_expire_minutes=="number"?t.auto_expire_minutes:"");const[c,b]=await Promise.all([ss(1),ts(1)]);P(c.results||[]),F(b.results||[])}catch(t){a({title:"Failed to load profile",description:B(t,String(t)),variant:"destructive"})}finally{te(!1)}})()},[a]),n.useEffect(()=>He(t=>_e(t)),[]);const Ce=async()=>{await $e()||a({title:"No update found",description:"You are on the latest version."})};n.useEffect(()=>{const s=c=>le(!0),t=()=>{le(!1),Se(!0),localStorage.removeItem("vendora_can_install"),a({title:"Installed",description:"Vendora is now installed as an app."})};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",t)}},[a]);const Ae=async()=>{const s=await Je();a(s?{title:"Installing…",description:"Completing installation."}:{title:"Install dismissed",description:"You can install later from Settings."})},ce=()=>{if(typeof Notification>"u"){oe("unsupported");return}oe(Notification.permission)},me=async s=>{de(!0);try{const t=await Xe(s);t==="subscribed"?(ce(),a({title:"Notifications enabled",description:"Browser notifications are active."})):a(t==="prompt-required"?{title:"Enable notifications",description:"Allow browser notifications when prompted to receive alerts."}:t==="permission-blocked"?{title:"Permission blocked",description:"Enable notifications from your browser settings to receive alerts.",variant:"destructive"}:t==="unsupported"?{title:"Not supported",description:"Push notifications are not supported on this device.",variant:"destructive"}:t==="unauthenticated"?{title:"Login required",description:"Sign in again to enable notifications.",variant:"destructive"}:{title:"Notification issue",description:"Could not enable notifications right now.",variant:"destructive"})}finally{ce(),de(!1)}},Be=async()=>{try{ae(!0);const s={name:h,bank_details:R};s.auto_accept=re,q!=null&&(s.telegram_username=q),G!=null&&(s.bio=G),w===""?s.auto_expire_minutes=null:s.auto_expire_minutes=Number(w);const t=await es(s);y(t.name||""),N(t.bank_details||""),Y(!!t.auto_accept),L(typeof t.auto_expire_minutes=="number"?t.auto_expire_minutes:""),O(t.telegram_username||""),W(t.bio||""),a({title:"Settings Saved",description:"Your settings have been updated successfully.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Save failed",description:B(s,String(s)),variant:"destructive"})}finally{ae(!1)}},Ie=async s=>{var c;const t=(c=s.target.files)==null?void 0:c[0];if(t)try{const b=new FormData;b.append("avatar",t);const Ue=(await Ze.patch("/api/v1/accounts/vendors/me/",b,{headers:{"Content-Type":"multipart/form-data"}})).data.avatar_url||URL.createObjectURL(t);u(Ue),a({title:"Profile updated",description:"Avatar uploaded.",className:"bg-success text-success-foreground"})}catch(b){a({title:"Upload failed",description:B(b,String(b)),variant:"destructive"})}},Re=async()=>{try{if(!o.bank_name||!o.account_number||!o.account_name){a({title:"Missing fields",description:"Bank name, account number, and account name are required.",variant:"destructive"});return}let s;k?(s=await rs(k,o),P(t=>t.map(c=>c.id===k?s:c))):(s=await ls(o),P(t=>[s,...t])),g({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1}),K(null),a({title:"Saved",description:"Bank detail saved.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Failed",description:B(s,String(s)),variant:"destructive"})}},Le=async s=>{await os(s),P(t=>t.filter(c=>c.id!==s))},Pe=async()=>{try{if(!d.asset||!d.buy_rate||!d.sell_rate){a({title:"Missing fields",description:"Asset, buy rate and sell rate are required.",variant:"destructive"});return}let s;_?(s=await as(_,d),F(t=>t.map(c=>c.id===_?s:c))):(s=await ns(d),F(t=>[s,...t])),f({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""}),H(null),a({title:"Saved",description:"Rate saved.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Failed",description:B(s,String(s)),variant:"destructive"})}},Fe=async s=>{await is(s),F(t=>t.filter(c=>c.id!==s))};n.useEffect(()=>{localStorage.setItem("vendora_theme",j);const s=document.documentElement;j==="dark"?s.classList.add("dark"):s.classList.remove("dark")},[j]);const r=J==null?void 0:J.subscription_status;return e.jsxs(Ge,{title:"Settings",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsx("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-primary/25 px-8 py-10 text-white shadow-xl shadow-primary/20",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{variant:"outline",className:"w-fit border-white/20 bg-white/10 uppercase tracking-[0.3em] text-xs text-primary/80",children:"Control Center"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold md:text-4xl",children:"Settings & Automations"}),e.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-200 md:text-base",children:"Tune every touchpoint, automate hand-offs, and keep your Vendora desk synced across channels."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(i,{asChild:!0,size:"sm",variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",children:e.jsxs(C,{to:"/availability",children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Update availability"]})}),e.jsx(i,{asChild:!0,size:"sm",variant:"outline",className:"border-white/30 bg-transparent text-white hover:bg-white/10",children:e.jsxs(C,{to:"/broadcast-messages",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Broadcast studio"]})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-slate-100 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",children:"Daily workflow"})]}),e.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-slate-200/90",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Refresh trading rails, rates, and payout details before market open."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Lock in your availability window so the bot knows when to hand off orders."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Queue a broadcast for promos or downtime so buyers stay informed."})]})]})]})]})}),r&&e.jsxs(z,{title:"Plan & Usage",description:"Review plan status, monitor daily usage, and know when to level up.",children:[e.jsx(x,{id:"account-summary",title:"Account",description:"Subscription snapshot, renewal cadence, and trial status.",icon:ze,bodyClassName:"space-y-2 text-sm",children:r.is_trial?e.jsxs("p",{className:"text-sm",children:["You are on a trial account. This trial ends on ",e.jsx("strong",{children:r.trial_expires_at?new Date(r.trial_expires_at).toLocaleString():"N/A"}),"."]}):e.jsxs("p",{className:"text-sm",children:["Your plan: ",e.jsx("strong",{children:r.plan}),r.plan_expires_at?e.jsxs(e.Fragment,{children:[" — expires on ",e.jsx("strong",{children:new Date(r.plan_expires_at).toLocaleString()})]}):null]})},"account"),e.jsxs(x,{id:"plan-usage",title:"Plan & Usage",description:"Monitor limits, unlock upgrades, and keep an eye on volume.",icon:D,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Current Plan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:r.is_trial?"Trial":r.plan==="none"?"Free Plan":r.plan==="monthly"?"Monthly Plan":r.plan==="quarterly"?"3-Month Plan":r.plan==="semi-annual"?"6-Month Plan":r.plan==="yearly"?"Annual Plan":r.plan==="perpetual"?"Perpetual Plan":r.plan}),(r.plan==="none"||r.is_trial)&&e.jsx(i,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(C,{to:"/upgrade",children:"Upgrade"})})]})]}),r.plan_expires_at&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Plan Expires"}),e.jsx("div",{className:"text-lg",children:new Date(r.plan_expires_at).toLocaleDateString()})]})]}),(r.plan==="none"||r.is_trial)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx(l,{className:"text-sm font-medium",children:"Daily Orders Usage"})]}),e.jsx(ds,{}),e.jsx(cs,{})]}),!r.is_trial&&r.plan!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(D,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Unlimited daily orders"})]})]},"plan-usage")]}),e.jsxs(z,{title:"Presence & Install",description:"Control how Vendora behaves as a PWA, on desktop, and through proactive notifications.",children:[e.jsx(x,{id:"bot-link",title:"Telegram Bot Link",description:"Drop your Telegram bot entry point anywhere customers hang out.",icon:M,children:U?e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[e.jsx(p,{readOnly:!0,value:U,className:"flex-1"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"secondary",onClick:()=>{navigator.clipboard.writeText(U),a({title:"Copied",description:"Bot link copied to clipboard."})},children:[e.jsx(qe,{className:"mr-1 h-4 w-4"})," Copy"]}),e.jsx(i,{asChild:!0,children:e.jsx("a",{href:U,target:"_blank",rel:"noreferrer",children:"Open"})})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set TELEGRAM_BOT_USERNAME in backend and refresh to see your link."})},"bot-link"),e.jsxs(x,{id:"application",title:"Application",description:"Ship instant updates, install the PWA, and stay alert with push notifications.",icon:M,children:[e.jsx("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{onClick:Ce,disabled:!E,variant:E?"default":"outline",children:E?"Update App":"Up to Date"}),!E&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates are checked automatically and applied when available."})]})}),e.jsx("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{onClick:Ae,disabled:$||!Q,children:$?"Installed":Q?"Install App":"Install Not Available"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Status:"}),$?e.jsx(A,{variant:"secondary",children:"Installed"}):Q?e.jsx(A,{variant:"outline",children:"Available"}):e.jsx(A,{variant:"outline",children:"Not available"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Notifications"}),e.jsx(A,{variant:S==="granted"?"secondary":S==="denied"?"destructive":"outline",children:S==="unsupported"?"Unsupported":S})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(i,{variant:"secondary",disabled:T,onClick:()=>me({prompt:!0}),children:T?"Checking…":"Enable Notifications"}),e.jsx(i,{variant:"secondary",disabled:T,onClick:()=>me({force:!0,prompt:!0}),children:T?"Refreshing…":"Refresh Subscription"})]})]}),S==="denied"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notifications are blocked in your browser settings. Enable them manually and try again."})]})]},"application"),e.jsx(x,{id:"theme",title:"Theme Settings",description:"Match your desk's lighting in a single tap.",icon:j==="dark"?pe:xe,tone:"muted",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs(i,{variant:j==="dark"?"default":"outline",onClick:()=>se("dark"),className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Dark Mode"})]}),e.jsxs(i,{variant:j==="light"?"default":"outline",onClick:()=>se("light"),className:"flex items-center space-x-2 border-border",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Light Mode"})]})]})},"theme")]}),e.jsxs(z,{title:"Vendor Profile & Trading Rails",description:"Keep your public profile, payout instructions, and asset catalog ready for the next order.",children:[e.jsx(x,{id:"profile",title:"Profile Settings",description:"Refresh the vendor story buyers see in the bot.",icon:Oe,tone:"gradient",bodyClassName:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(p,{id:"name",value:h,onChange:s=>y(s.target.value),className:"bg-background border-border",disabled:v})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"telegram-username",children:"Telegram Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),e.jsx(p,{id:"telegram-username",placeholder:"your_handle",value:q,onChange:s=>O(s.target.value.replace(/^@+/,"")),className:"bg-background border-border",disabled:v})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Used in the bot for the “Contact Vendor” button."})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bio",children:"Short Bio (optional)"}),e.jsx(ee,{id:"bio",placeholder:"A short line customers will see in the bot",value:G,onChange:s=>W(s.target.value),className:"bg-background border-border min-h-[72px]",disabled:v})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(l,{htmlFor:"profile-image",children:"Profile Image / Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[m&&e.jsx("img",{src:m,alt:"Profile",className:"h-16 w-16 rounded-lg object-cover"}),e.jsx(p,{id:"profile-image",type:"file",accept:"image/*",onChange:Ie,className:"bg-background border-border",disabled:v})]})]})})]})},"profile"),e.jsxs(x,{id:"rates",title:"Assets & Rates",description:"Keep trading pairs, spreads, and settlement notes current.",icon:Z,tone:"gradient",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-name",children:"Asset"}),e.jsx(p,{id:"settings-asset-name",value:String(d.asset||""),onChange:s=>f({...d,asset:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-buy-rate",children:"Buy Rate"}),e.jsx(p,{id:"settings-asset-buy-rate",type:"number",value:String(d.buy_rate||""),onChange:s=>f({...d,buy_rate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-sell-rate",children:"Sell Rate"}),e.jsx(p,{id:"settings-asset-sell-rate",type:"number",value:String(d.sell_rate||""),onChange:s=>f({...d,sell_rate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-contract",children:"Contract Address (optional)"}),e.jsx(p,{id:"settings-asset-contract",value:String(d.contract_address||""),onChange:s=>f({...d,contract_address:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx(l,{htmlFor:"settings-asset-bank-details",children:"Bank Details (optional)"}),e.jsx(ee,{id:"settings-asset-bank-details",value:String(d.bank_details||""),onChange:s=>f({...d,bank_details:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:Pe,className:"bg-gradient-primary",children:[e.jsx(V,{className:"mr-1 h-4 w-4"})," ",_?"Update Asset":"Add Asset"]}),_&&e.jsx(i,{variant:"outline",onClick:()=>{H(null),f({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""})},children:"Cancel"})]}),e.jsxs("div",{className:"space-y-2",children:[ie.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.asset}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Buy: ",s.buy_rate," • Sell: ",s.sell_rate]}),s.contract_address&&e.jsxs("p",{className:"text-xs",children:["Contract: ",s.contract_address]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"icon",variant:"outline",onClick:()=>{H(s.id),f(s)},children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(i,{size:"icon",variant:"destructive",onClick:()=>Fe(s.id),children:e.jsx(ge,{className:"h-4 w-4"})})]})]},s.id)),ie.length===0&&e.jsx(fe,{icon:D,badge:"Publish rails",title:"Add your first trading pair",description:"Buyers rely on this list to know what they can move with you. Set a spread, optional instructions, and the Telegram bot will handle the rest.",actions:e.jsxs(i,{variant:"secondary",onClick:()=>{var s;return(s=document.getElementById("settings-asset-name"))==null?void 0:s.focus()},children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Add asset"]}),className:"bg-slate-950 text-left md:text-center"})]})]},"rates"),e.jsxs(x,{id:"auto-expire",title:"Orders Auto-Expiry",description:"Decide when pending orders self-clean your pipeline.",icon:M,tone:"gradient",bodyClassName:"max-w-xs space-y-2",children:[e.jsx(l,{htmlFor:"auto-expire-minutes",children:"Auto-expire after (minutes)"}),e.jsx(p,{id:"auto-expire-minutes",type:"number",min:1,placeholder:"e.g. 30",value:w,onChange:s=>{const t=s.target.value;L(t===""?"":Number(t))},className:"bg-background border-border",disabled:v}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave blank to use the global default."})]},"auto-expire"),e.jsxs(x,{id:"banks",title:"Bank Details / Payment Instructions",description:"Store payout profiles so payment instructions are one click away.",icon:Z,tone:"gradient",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-default-instructions",children:"Default Instructions (optional)"}),e.jsx(ee,{id:"settings-bank-default-instructions",value:R,onChange:s=>N(s.target.value),className:"bg-background border-border min-h-[80px]",placeholder:"Generic instructions...",disabled:v})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-name",children:"Bank Name"}),e.jsx(p,{id:"settings-bank-name",value:String(o.bank_name||""),onChange:s=>g({...o,bank_name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-number",children:"Account Number"}),e.jsx(p,{id:"settings-bank-number",value:String(o.account_number||""),onChange:s=>g({...o,account_number:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-account-name",children:"Account Name"}),e.jsx(p,{id:"settings-bank-account-name",value:String(o.account_name||""),onChange:s=>g({...o,account_name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-instructions",children:"Instructions (optional)"}),e.jsx(p,{id:"settings-bank-instructions",value:String(o.instructions||""),onChange:s=>g({...o,instructions:s.target.value})})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",htmlFor:"settings-bank-default",children:[e.jsx("input",{id:"settings-bank-default",type:"checkbox",checked:!!o.is_default,onChange:s=>g({...o,is_default:s.target.checked})}),"Set as default"]})})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(i,{onClick:Re,className:"bg-gradient-primary",children:[e.jsx(V,{className:"mr-1 h-4 w-4"})," ",k?"Update Bank Detail":"Add Bank Detail"]}),k&&e.jsx(i,{variant:"outline",onClick:()=>{K(null),g({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1})},children:"Cancel"})]}),e.jsxs("div",{className:"space-y-2",children:[ne.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.bank_name," • ",s.account_number]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.account_name,s.is_default?" • Default":""]}),s.instructions&&e.jsx("p",{className:"text-xs",children:s.instructions})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"icon",variant:"outline",onClick:()=>{K(s.id),g(s)},children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(i,{size:"icon",variant:"destructive",onClick:()=>Le(s.id),children:e.jsx(ge,{className:"h-4 w-4"})})]})]},s.id)),ne.length===0&&e.jsx(fe,{icon:Z,badge:"Payout ready",title:"Save a payout profile",description:"Make approvals instant by attaching verified banking instructions. Buyers get the details as soon as you accept.",actions:e.jsxs(i,{variant:"secondary",onClick:()=>{var s;return(s=document.getElementById("settings-bank-name"))==null?void 0:s.focus()},children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Add bank profile"]}),className:"bg-slate-950 text-left md:text-center"})]})]},"banks")]}),e.jsx(z,{title:"Signals & Automations",description:"Guide the bot, nudge customers, and keep frontline communications in sync.",children:e.jsx(x,{id:"vendor-management",title:"Vendor Management",description:"Guide availability, broadcasts, and automated customer responses.",icon:M,tone:"gradient",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Auto-accept via Telegram Bot"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let Vendora hand customers your payment rails instantly and spin up transactions on autopilot whenever the Telegram bot captures a new order."}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:re,onChange:s=>Y(s.target.checked)}),e.jsx("span",{className:"text-sm",children:"Auto-accept incoming trades and create transactions automatically"})]})})]}),e.jsx(i,{asChild:!0,variant:"ghost",className:"h-auto justify-start rounded-xl border border-border/60 bg-primary/5 p-4 text-left hover:bg-primary/10",children:e.jsx(C,{to:"/availability",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Availability Windows"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Broadcast when you're live so the Telegram bot knows when to pause hand-offs."})]})})}),e.jsx(i,{asChild:!0,variant:"ghost",className:"h-auto justify-start rounded-xl border border-border/60 bg-primary/5 p-4 text-left hover:bg-primary/10",children:e.jsx(C,{to:"/broadcast-messages",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Broadcast Studio"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send polished promos, downtime alerts, and rate drops to every buyer instantly."})]})})})]})},"vendor-management")})]}),e.jsx("div",{className:"h-4"}),e.jsx("div",{className:"sticky z-10",style:{bottom:"calc(var(--safe-area-bottom, 0px) + 1rem)"},children:e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{onClick:Be,className:"bg-gradient-primary hover:opacity-90 shadow-md",disabled:we,children:"Save All Settings"})})})]})};export{ws as default};
