import{r,j as e,by as f,bz as C,aH as b,aJ as S,bo as u,aw as A,b7 as T,bA as B}from"./vendor-C5ZIaFXU.js";import{L as M,B as U}from"./badge-CwdvftBL.js";import{c as g,C as d,a as p,b as v,d as j,e as o}from"./charts_panel-CXTnZd3F.js";import{a as L,c as w,B as c,L as y,h as P,g as _}from"./main-BnmLXDMO.js";import{T as E}from"./textarea-B39yKq_J.js";import"./vendor-recharts-Bhh5Wr_H.js";const N=r.forwardRef(({className:i,...s},t)=>e.jsx(f,{className:g("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",i),...s,ref:t,children:e.jsx(C,{className:g("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));N.displayName=f.displayName;const q=()=>{const{toast:i}=L(),[s,t]=r.useState(!0),[l,n]=r.useState(""),[m,x]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const a=await w();t(!!a.is_available),n(a.unavailable_message||"")}catch{}})()},[]);const k=async()=>{x(!0);try{const a=await P.post("/api/v1/accounts/vendors/toggle-availability/",{is_available:s,unavailable_message:l});try{const h=await w();t(!!h.is_available),n(h.unavailable_message||"")}catch{}i({title:"Availability Updated",description:s?"You are now available for new orders.":"You are now unavailable. Customers will see your custom message.",className:"bg-success text-success-foreground"})}catch(a){i({title:"Update failed",description:_(a,"Could not update availability"),variant:"destructive"})}finally{x(!1)}};return e.jsx(M,{children:e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-primary/25 px-6 py-8 text-white shadow-xl shadow-primary/20",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsx(U,{variant:"outline",className:"border-white/20 bg-white/10 text-xs uppercase tracking-[0.3em] text-primary/80",children:"Availability Signal"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{asChild:!0,size:"sm",variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",children:e.jsxs(b,{to:"/settings",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Back to Settings"]})}),e.jsx(c,{asChild:!0,size:"sm",variant:"outline",className:"border-white/30 bg-transparent text-white hover:bg-white/10",children:e.jsxs(b,{to:"/broadcast-messages",children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Open Broadcast Studio"]})})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h1",{className:"text-3xl font-semibold md:text-4xl",children:"Set your trading rhythm"}),e.jsx("p",{className:"max-w-2xl text-sm text-slate-200 md:text-base",children:"Let loyal buyers and the Vendora Telegram bot know exactly when you're taking orders, pausing, or coming back online."})]}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-100 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",children:"Why it matters"})]}),e.jsx("p",{className:"mt-3 leading-relaxed",children:"Availability flips the Telegram bot state so orders, broadcasts, and automations stay aligned with your desk's real-world schedule."})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-100 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",children:"Pro tip"})]}),e.jsx("p",{className:"mt-3 leading-relaxed",children:"Pair status changes with a quick broadcast so active buyers always know when you're live—and when to expect a response."})]})]})]}),e.jsxs(d,{className:"bg-gradient-card border-border",children:[e.jsxs(p,{children:[e.jsxs(v,{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"h-5 w-5"}),e.jsx("span",{children:"Vendor Availability"})]}),e.jsx(j,{children:"Flip the Telegram bot between live and paused states with a single toggle."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg bg-secondary/30",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"availability-toggle",className:"text-base font-medium",children:s?"Currently Available":"Currently Unavailable"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"You’re accepting new trades and the Telegram bot will continue routing buyers to you.":"New trades pause here and buyers will see your downtime message instead."})]}),e.jsx(N,{id:"availability-toggle",checked:s,onCheckedChange:t,className:"data-[state=checked]:bg-success"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 rounded-lg border border-border bg-background",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s?"bg-success animate-pulse":"bg-muted-foreground"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Status: ",s?"Available":"Unavailable"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s?"Open for trades — broadcasts and automations stay live.":"Paused for now — broadcasts will note your downtime."})]})]})]})]}),e.jsxs(d,{className:"bg-gradient-card border-border",children:[e.jsxs(p,{children:[e.jsxs(v,{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-5 w-5"}),e.jsx("span",{children:"Unavailable Message"})]}),e.jsx(j,{children:"Set the note buyers see when you’re offline so expectations stay clear."})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"unavailable-message",children:["Message to Customers ",!s&&"(Currently Active)"]}),e.jsx(E,{id:"unavailable-message",placeholder:"e.g., 'Currently unavailable until 6 PM. Will respond to all messages then.' or 'Taking a break, back tomorrow morning.'",value:l,onChange:a=>n(a.target.value),className:"bg-background border-border min-h-[100px] resize-none",disabled:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s?"This message only appears when you flip to unavailable.":"Buyers are currently seeing this downtime note."})]}),!s&&l&&e.jsxs("div",{className:"mt-4 p-4 border border-warning/30 rounded-lg bg-warning/10",children:[e.jsx("p",{className:"text-sm font-medium text-warning mb-2",children:"Customer View Preview:"}),e.jsx("div",{className:"p-3 bg-background rounded border border-border",children:e.jsx("p",{className:"text-sm",children:l})})]})]})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(c,{onClick:k,disabled:m,className:"bg-gradient-primary hover:opacity-90 min-w-[200px]",children:m?"Saving...":"Save Changes"})}),e.jsx(d,{className:"bg-secondary/30 border-border",children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"How the Telegram bot reacts:"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Available"}),": New orders, broadcasts, and notifications ship as normal."]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Unavailable"}),": Buyers see your downtime message before opening a ticket."]}),e.jsx("li",{children:"• Existing transactions continue regardless of status toggles."}),e.jsx("li",{children:"• Update availability anytime from Settings or this page."})]})]})})})]})})};export{q as default};
