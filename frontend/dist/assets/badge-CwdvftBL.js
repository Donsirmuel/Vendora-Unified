const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CBLCpziT.js","assets/charts_panel-CXTnZd3F.js","assets/vendor-C5ZIaFXU.js","assets/vendor-recharts-Bhh5Wr_H.js","assets/main-BnmLXDMO.js","assets/main-CB2XIdp4.css","assets/orders-BRpWy8Bz.js","assets/queries-DoRl4NRH.js","assets/broadcast-Dzh1RArE.js","assets/sse-C4Am9NwZ.js","assets/BrandedEmptyState-Dd66voyI.js","assets/Orders-B5RS7UwE.js","assets/select-D7oLnaqY.js","assets/FreePlanComponents-CbscB5Hd.js","assets/OrderDetails-BR-9mAU1.js","assets/textarea-B39yKq_J.js","assets/rates-DrUr7xMo.js","assets/Transactions-C5dxspG4.js","assets/TransactionDetails-h08fANy6.js","assets/Settings-elJsnXdI.js","assets/Availability-DPjwieTv.js","assets/BroadcastMessages-CcctdPYv.js","assets/Queries-BjEvAVsl.js","assets/Upgrade-DX6921pq.js","assets/AdminPayments-DmGMe7L6.js"])))=>i.map(i=>d[i]);
import{c as h,_ as o}from"./charts_panel-CXTnZd3F.js";import{r as f,j as e,b$ as v,c0 as _,c1 as w,ax as L,an as R,c2 as A,c3 as D,b4 as O,b5 as P,b6 as V,br as C,c4 as S,aH as M,ak as q}from"./vendor-C5ZIaFXU.js";import{u as B,B as F,T as z,e as H,k as m}from"./main-BnmLXDMO.js";const N=f.forwardRef(({className:n,...i},c)=>e.jsx(v,{ref:c,className:h("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...i}));N.displayName=v.displayName;const y=f.forwardRef(({className:n,...i},c)=>e.jsx(_,{ref:c,className:h("aspect-square h-full w-full",n),...i}));y.displayName=_.displayName;const j=f.forwardRef(({className:n,...i},c)=>e.jsx(w,{ref:c,className:h("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...i}));j.displayName=w.displayName;const U=()=>e.jsx("footer",{className:"w-full border-t border-border bg-card px-6 py-4 mt-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Â© ",new Date().getFullYear()," Vendora"]}),e.jsx("div",{children:e.jsx("a",{className:"underline",href:"#",target:"_blank",rel:"noopener noreferrer",children:"Contact us"})})]})}),Q=({children:n,title:i})=>{const c=L(),[p,b]=f.useState(!1),{user:r,logout:E}=B();f.useEffect(()=>{if(!r||typeof window>"u"||typeof Notification>"u"||Notification.permission!=="default")return;const t="vendora_push_prompted_at_v1",a=1e3*60*60*24*3;try{const s=Number(localStorage.getItem(t)||"0");if(!Number.isNaN(s)&&s>0&&Date.now()-s<a)return}catch{}return(()=>{const s=async()=>{let l=null;try{switch(l=await H({prompt:!0}),l){case"subscribed":m({title:"Notifications enabled",description:"You will now receive alerts for new activity."});break;case"permission-blocked":m({title:"Notifications blocked",description:"Enable notifications from your browser settings to receive alerts.",variant:"destructive"});break;case"prompt-required":m({title:"Enable notifications later",description:"You can turn on notifications anytime from Settings."});break;case"unsupported":m({title:"Notifications unavailable",description:"This device does not support push notifications.",variant:"destructive"});break;case"error":case"unauthenticated":m({title:"Notifications unavailable",description:"We could not enable notifications automatically. Try again from Settings.",variant:"destructive"});break;default:break}}catch{m({title:"Notifications error",description:"We could not enable notifications. Try again from Settings.",variant:"destructive"})}finally{try{localStorage.setItem(t,String(Date.now()))}catch{}}};if("requestIdleCallback"in window){const l=window.requestIdleCallback(s,{timeout:2e3});return()=>{var d;return(d=window.cancelIdleCallback)==null?void 0:d.call(window,l)}}const x=window.setTimeout(s,1800);return()=>window.clearTimeout(x)})()},[r]),f.useEffect(()=>{if(!r||typeof window>"u")return;const t="__vendora_prefetched__",a=window;if(a[t])return;const u=[()=>o(()=>import("./Dashboard-CBLCpziT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),()=>o(()=>import("./Orders-B5RS7UwE.js"),__vite__mapDeps([11,2,1,3,4,5,12,6,9,13,10])),()=>o(()=>import("./OrderDetails-BR-9mAU1.js"),__vite__mapDeps([14,2,1,3,4,5,12,15,6,16])),()=>o(()=>import("./Transactions-C5dxspG4.js"),__vite__mapDeps([17,2,1,3,4,5,9,10])),()=>o(()=>import("./TransactionDetails-h08fANy6.js"),__vite__mapDeps([18,2,1,3,4,5])),()=>o(()=>import("./Settings-elJsnXdI.js"),__vite__mapDeps([19,2,4,1,3,5,15,16,13,10])),()=>o(()=>import("./Availability-DPjwieTv.js"),__vite__mapDeps([20,2,1,3,4,5,15])),()=>o(()=>import("./BroadcastMessages-CcctdPYv.js"),__vite__mapDeps([21,2,1,3,4,5,15,12,8,10])),()=>o(()=>import("./Queries-BjEvAVsl.js"),__vite__mapDeps([22,2,1,3,4,5,15,12,7,10])),()=>o(()=>import("./Upgrade-DX6921pq.js"),__vite__mapDeps([23,2,4,1,3,5,10])),()=>o(()=>import("./AdminPayments-DmGMe7L6.js"),__vite__mapDeps([24,2,4,1,3,5,10]))],s=()=>{if(!a[t]){a[t]=!0;for(const l of u)l().catch(()=>{})}};if("requestIdleCallback"in window){const l=window.requestIdleCallback(s,{timeout:4e3});return()=>{var d;return(d=window.cancelIdleCallback)==null?void 0:d.call(window,l)}}const x=setTimeout(s,2e3);return()=>clearTimeout(x)},[r]);const k=[{name:"Dashboard",href:"/dashboard",icon:D},{name:"Orders",href:"/orders",icon:O},{name:"Transactions",href:"/transactions",icon:P},{name:"Queries",href:"/queries",icon:V},{name:"Settings",href:"/settings",icon:C},{name:"Logout",href:"#logout",icon:S,action:"logout"}],I=t=>c.pathname===t,T=()=>{E()};return e.jsxs("div",{className:"min-h-dvh bg-background safe-pt",children:[e.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:e.jsx(F,{variant:"outline",size:"icon",onClick:()=>b(!p),className:"bg-card border-border",children:p?e.jsx(R,{className:"h-4 w-4"}):e.jsx(A,{className:"h-4 w-4"})})}),e.jsx("div",{role:"navigation","aria-label":"Primary",className:`fixed inset-y-0 left-0 z-40 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out lg:translate-x-0 overflow-y-auto ${p?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full pb-6",children:[e.jsx("div",{className:"flex items-center justify-center h-16 border-b border-border",children:e.jsx("h1",{className:"text-2xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"Vendora"})}),r&&e.jsx("div",{className:"px-4 py-3 border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-10 w-10",children:(()=>{var d,g;const t=r==null?void 0:r.avatar_url,a=r.name||"",u=a.trim().split(/\s+/).filter(Boolean),s=((d=u[0])==null?void 0:d[0])||"",x=u.length>1?u[u.length-1][0]:((g=u[0])==null?void 0:g[1])||"",l=(s+x).toUpperCase()||"?";return e.jsxs(e.Fragment,{children:[e.jsx(y,{src:t||void 0,alt:a||"User"}),e.jsx(j,{children:l})]})})()}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:r.name}),e.jsx("p",{className:"text-muted-foreground",children:r.email})]}),e.jsx(z,{className:"ml-auto"})]})}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2","aria-label":"Main menu",children:k.map(t=>{const a=t.icon;return t.action==="logout"?e.jsxs("button",{onClick:()=>{b(!1),T()},className:"w-full text-left flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors text-muted-foreground hover:text-foreground hover:bg-secondary",children:[e.jsx(a,{className:"mr-3 h-5 w-5"}),t.name]},t.name):e.jsxs(M,{to:t.href,onClick:()=>b(!1),className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${I(t.href)?"bg-primary text-primary-foreground shadow-glow":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[e.jsx(a,{className:"mr-3 h-5 w-5"}),t.name]},t.name)})})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 lg:hidden",onClick:()=>b(!1)}),e.jsxs("div",{className:"lg:ml-64 flex flex-col min-h-dvh",children:[i&&e.jsx("header",{className:"bg-card border-b border-border px-6 py-4",role:"banner",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:i})})}),e.jsx("main",{id:"main-content",className:"flex-1 p-6 pb-12 safe-pb",role:"main",tabIndex:-1,children:n}),e.jsx(U,{})]})]})},Y=q("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:n,variant:i,...c}){return e.jsx("div",{className:h(Y({variant:i}),n),...c})}export{X as B,Q as L};
