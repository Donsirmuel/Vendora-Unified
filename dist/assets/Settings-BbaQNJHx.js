import{bi as Te,r as n,j as e,bj as Me,bk as Ve,bl as je,bm as ze,bn as ve,aH as S,aw as pe,bo as qe,aN as X,bp as Oe,bq as E,br as T,bs as Ge,aL as xe,aK as he,bt as We,bu as M,ba as V,bv as ge,bw as fe}from"./vendor-LI3anQjP.js";import{L as Ye,B as C}from"./badge-0Mmftv1n.js";import{a as Ke,i as He,u as Qe,s as $e,B as i,L as l,I as p,c as Je,g as A,r as Xe,p as Ze,e as es,h as ss,d as ts}from"./main-Dx6KqeX5.js";import{T as Z}from"./textarea-BkG9H_Pj.js";import{l as as,a as ns,u as is,c as rs,d as ls,b as os,e as ds,f as cs}from"./rates-C4sKvACh.js";import{g as ms}from"./currency-CzyHyq4G.js";import{a as us,F as ps}from"./FreePlanComponents-A75r-WAZ.js";import{c as B}from"./charts_panel-DZ6GAu93.js";import{B as be}from"./BrandedEmptyState-3fXBKWGy.js";import"./vendor-recharts-iVWv7ny2.js";const xs=Te,ye=n.forwardRef(({className:a,...m},u)=>e.jsx(Me,{ref:u,className:B("border-b",a),...m}));ye.displayName="AccordionItem";const Ne=n.forwardRef(({className:a,children:m,...u},h)=>e.jsx(Ve,{className:"flex",children:e.jsxs(je,{ref:h,className:B("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...u,children:[m,e.jsx(ze,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Ne.displayName=je.displayName;const we=n.forwardRef(({className:a,children:m,...u},h)=>e.jsx(ve,{ref:h,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...u,children:e.jsx("div",{className:B("pb-4 pt-0",a),children:m})}));we.displayName=ve.displayName;const hs={solid:"bg-card",muted:"bg-muted/50 dark:bg-muted/30",gradient:"bg-gradient-card"},x=({id:a,title:m,description:u,icon:h,children:v,tone:I="solid",containerClassName:y,bodyClassName:N})=>e.jsxs(ye,{value:a,className:B("rounded-xl border border-border shadow-sm transition hover:border-primary/40 focus-within:border-primary/60",hs[I],y),children:[e.jsx(Ne,{className:"px-4 py-3 text-left",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"rounded-md bg-primary/10 p-2 text-primary",children:e.jsx(h,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold leading-5",children:m}),u&&e.jsx("span",{className:"text-xs text-muted-foreground leading-4",children:u})]})]})}),e.jsx(we,{className:"px-4",children:e.jsx("div",{className:B("space-y-4 text-sm",N),children:v})})]}),z=({title:a,description:m,children:u})=>e.jsxs("section",{className:"space-y-4",children:[e.jsxs("header",{className:"space-y-1",children:[e.jsx("h2",{className:"text-base font-semibold tracking-tight text-foreground md:text-lg",children:a}),m&&e.jsx("p",{className:"text-sm text-muted-foreground",children:m})]}),e.jsx(xs,{type:"multiple",defaultValue:[],className:"space-y-3",children:u})]}),Ss=()=>{const{toast:a}=Ke(),[m,u]=n.useState(""),[h,v]=n.useState(""),[I,y]=n.useState(""),[N,R]=n.useState(""),[j,ee]=n.useState(()=>localStorage.getItem("vendora_theme")||"dark"),[se,q]=n.useState("USD"),[b,te]=n.useState(!0),[ke,ae]=n.useState(!1),[ne,P]=n.useState([]),[ie,U]=n.useState([]),[O,G]=n.useState(""),[W,Y]=n.useState(""),[re,K]=n.useState(!1),[d,g]=n.useState({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1}),[w,H]=n.useState(null),[c,f]=n.useState({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""}),[k,Q]=n.useState(null),[L,_e]=n.useState(""),[D,Se]=n.useState(()=>typeof window<"u"?He():!1),[$,le]=n.useState(()=>typeof window<"u"&&localStorage.getItem("vendora_can_install")==="1"),[J,Ce]=n.useState(()=>{if(typeof window>"u")return!1;if(typeof navigator<"u"&&navigator.standalone)return!0;try{return window.matchMedia("(display-mode: standalone)").matches}catch{return!1}}),[_,oe]=n.useState(()=>typeof window>"u"||typeof Notification>"u"?"unsupported":Notification.permission),[F,de]=n.useState(!1),{user:Ae}=Qe();n.useEffect(()=>{(async()=>{try{te(!0);const t=await Je();v(t.name||""),K(!!t.auto_accept),y(t.bank_details||""),G(t.telegram_username||""),Y(t.bio||""),q(t.currency||"USD"),t.avatar_url&&u(t.avatar_url),t.bot_link&&_e(t.bot_link),R(typeof t.auto_expire_minutes=="number"?t.auto_expire_minutes:"");const[o,ue]=await Promise.all([as(1),ns(1)]);P(o.results||[]),U(ue.results||[])}catch(t){a({title:"Failed to load profile",description:A(t,String(t)),variant:"destructive"})}finally{te(!1)}})()},[a]),n.useEffect(()=>$e(t=>Se(t)),[]);const Be=async()=>{await Xe()||a({title:"No update found",description:"You are on the latest version."})};n.useEffect(()=>{const s=o=>le(!0),t=()=>{le(!1),Ce(!0),localStorage.removeItem("vendora_can_install"),a({title:"Installed",description:"Vendora is now installed as an app."})};return window.addEventListener("beforeinstallprompt",s),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",s),window.removeEventListener("appinstalled",t)}},[a]);const Ie=async()=>{const s=await Ze();a(s?{title:"Installing…",description:"Completing installation."}:{title:"Install dismissed",description:"You can install later from Settings."})},ce=()=>{if(typeof Notification>"u"){oe("unsupported");return}oe(Notification.permission)},me=async s=>{de(!0);try{const t=await es(s);t==="subscribed"?(ce(),a({title:"Notifications enabled",description:"Browser notifications are active."})):a(t==="prompt-required"?{title:"Enable notifications",description:"Allow browser notifications when prompted to receive alerts."}:t==="permission-blocked"?{title:"Permission blocked",description:"Enable notifications from your browser settings to receive alerts.",variant:"destructive"}:t==="unsupported"?{title:"Not supported",description:"Push notifications are not supported on this device.",variant:"destructive"}:t==="unauthenticated"?{title:"Login required",description:"Sign in again to enable notifications.",variant:"destructive"}:{title:"Notification issue",description:"Could not enable notifications right now.",variant:"destructive"})}finally{ce(),de(!1)}},Re=async()=>{try{ae(!0);const s={name:h,bank_details:I};s.auto_accept=re,s.currency=se,O!=null&&(s.telegram_username=O),W!=null&&(s.bio=W),N===""?s.auto_expire_minutes=null:s.auto_expire_minutes=Number(N);const t=await ts(s);v(t.name||""),y(t.bank_details||""),K(!!t.auto_accept),q(t.currency||"USD"),R(typeof t.auto_expire_minutes=="number"?t.auto_expire_minutes:""),G(t.telegram_username||""),Y(t.bio||""),a({title:"Settings Saved",description:"Your settings have been updated successfully.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Save failed",description:A(s,String(s)),variant:"destructive"})}finally{ae(!1)}},Pe=async s=>{const t=s.target.files?.[0];if(t)try{const o=new FormData;o.append("avatar",t);const Ee=(await ss.patch("/api/v1/accounts/vendors/me/",o,{headers:{"Content-Type":"multipart/form-data"}})).data.avatar_url||URL.createObjectURL(t);u(Ee),a({title:"Profile updated",description:"Avatar uploaded.",className:"bg-success text-success-foreground"})}catch(o){a({title:"Upload failed",description:A(o,String(o)),variant:"destructive"})}},Ue=async()=>{try{if(!d.bank_name||!d.account_number||!d.account_name){a({title:"Missing fields",description:"Bank name, account number, and account name are required.",variant:"destructive"});return}let s;w?(s=await os(w,d),P(t=>t.map(o=>o.id===w?s:o))):(s=await ds(d),P(t=>[s,...t])),g({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1}),H(null),a({title:"Saved",description:"Bank detail saved.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Failed",description:A(s,String(s)),variant:"destructive"})}},Le=async s=>{await cs(s),P(t=>t.filter(o=>o.id!==s))},De=async()=>{try{if(!c.asset||!c.buy_rate||!c.sell_rate){a({title:"Missing fields",description:"Asset, buy rate and sell rate are required.",variant:"destructive"});return}let s;k?(s=await is(k,c),U(t=>t.map(o=>o.id===k?s:o))):(s=await rs(c),U(t=>[s,...t])),f({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""}),Q(null),a({title:"Saved",description:"Rate saved.",className:"bg-success text-success-foreground"})}catch(s){a({title:"Failed",description:A(s,String(s)),variant:"destructive"})}},Fe=async s=>{await ls(s),U(t=>t.filter(o=>o.id!==s))};n.useEffect(()=>{localStorage.setItem("vendora_theme",j);const s=document.documentElement;j==="dark"?s.classList.add("dark"):s.classList.remove("dark")},[j]);const r=Ae?.subscription_status;return e.jsxs(Ye,{title:"Settings",children:[e.jsxs("div",{className:"space-y-10",children:[e.jsx("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950 via-slate-900 to-primary/25 px-8 py-10 text-white shadow-xl shadow-primary/20",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(C,{variant:"outline",className:"w-fit border-white/20 bg-white/10 uppercase tracking-[0.3em] text-xs text-primary/80",children:"Settings"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold md:text-4xl",children:"Settings"}),e.jsx("p",{className:"mt-3 max-w-2xl text-sm text-slate-200 md:text-base",children:"Manage your profile, rates, and bot settings in one place."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(i,{asChild:!0,size:"sm",variant:"secondary",className:"bg-white/10 text-white hover:bg-white/20",children:e.jsxs(S,{to:"/availability",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Update availability"]})}),e.jsx(i,{asChild:!0,size:"sm",variant:"outline",className:"border-white/30 bg-transparent text-white hover:bg-white/10",children:e.jsxs(S,{to:"/broadcast-messages",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Broadcast studio"]})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-sm text-slate-100 shadow-inner",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em]",children:"Daily workflow"})]}),e.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-slate-200/90",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Refresh trading rails, rates, and payout details before market open."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Lock in your availability window so the bot knows when to hand off orders."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(X,{className:"mt-1 h-3.5 w-3.5 text-primary/80"}),e.jsx("span",{children:"Queue a broadcast for promos or downtime so buyers stay informed."})]})]})]})]})}),r&&e.jsxs(z,{title:"Plan & Usage",description:"Review plan status, monitor daily usage, and know when to level up.",children:[e.jsx(x,{id:"account-summary",title:"Account",description:"Subscription snapshot, renewal cadence, and trial status.",icon:Oe,bodyClassName:"space-y-2 text-sm",children:r.is_trial?e.jsxs("p",{className:"text-sm",children:["You are on a trial account. This trial ends on ",e.jsx("strong",{children:r.trial_expires_at?new Date(r.trial_expires_at).toLocaleString():"N/A"}),"."]}):e.jsxs("p",{className:"text-sm",children:["Your plan: ",e.jsx("strong",{children:r.plan}),r.plan_expires_at?e.jsxs(e.Fragment,{children:[" — expires on ",e.jsx("strong",{children:new Date(r.plan_expires_at).toLocaleString()})]}):null]})},"account"),e.jsxs(x,{id:"plan-usage",title:"Plan & Usage",description:"Monitor limits, unlock upgrades, and keep an eye on volume.",icon:E,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Current Plan"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:r.is_trial?"Trial":r.plan==="none"?"Free Plan":r.plan==="monthly"?"Monthly Plan":r.plan==="quarterly"?"3-Month Plan":r.plan==="semi-annual"?"6-Month Plan":r.plan==="yearly"?"Annual Plan":r.plan==="perpetual"?"Perpetual Plan":r.plan}),(r.plan==="none"||r.is_trial)&&e.jsx(i,{asChild:!0,size:"sm",variant:"outline",children:e.jsx(S,{to:"/upgrade",children:"Upgrade"})})]})]}),r.plan_expires_at&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"text-sm font-medium text-muted-foreground",children:"Plan Expires"}),e.jsx("div",{className:"text-lg",children:new Date(r.plan_expires_at).toLocaleDateString()})]})]}),(r.plan==="none"||r.is_trial)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(l,{className:"text-sm font-medium",children:"Daily Orders Usage"})]}),e.jsx(us,{}),e.jsx(ps,{})]}),!r.is_trial&&r.plan!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Unlimited daily orders"})]})]},"plan-usage")]}),e.jsxs(z,{title:"Presence & Install",description:"Control how Vendora behaves as a PWA, on desktop, and through proactive notifications.",children:[e.jsx(x,{id:"bot-link",title:"Telegram Bot Link",description:"Drop your Telegram bot entry point anywhere customers hang out.",icon:T,children:L?e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center",children:[e.jsx(p,{readOnly:!0,value:L,className:"flex-1"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"secondary",onClick:()=>{navigator.clipboard.writeText(L),a({title:"Copied",description:"Bot link copied to clipboard."})},children:[e.jsx(Ge,{className:"mr-1 h-4 w-4"})," Copy"]}),e.jsx(i,{asChild:!0,children:e.jsx("a",{href:L,target:"_blank",rel:"noreferrer",children:"Open"})})]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set TELEGRAM_BOT_USERNAME in backend and refresh to see your link."})},"bot-link"),e.jsxs(x,{id:"application",title:"Application",description:"Ship instant updates, install the PWA, and stay alert with push notifications.",icon:T,children:[e.jsx("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{onClick:Be,disabled:!D,variant:D?"default":"outline",children:D?"Update App":"Up to Date"}),!D&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Updates are checked automatically and applied when available."})]})}),e.jsx("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{onClick:Ie,disabled:J||!$,children:J?"Installed":$?"Install App":"Install Not Available"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{children:"Status:"}),J?e.jsx(C,{variant:"secondary",children:"Installed"}):$?e.jsx(C,{variant:"outline",children:"Available"}):e.jsx(C,{variant:"outline",children:"Not available"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Notifications"}),e.jsx(C,{variant:_==="granted"?"secondary":_==="denied"?"destructive":"outline",children:_==="unsupported"?"Unsupported":_})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(i,{variant:"secondary",disabled:F,onClick:()=>me({prompt:!0}),children:F?"Checking…":"Enable Notifications"}),e.jsx(i,{variant:"secondary",disabled:F,onClick:()=>me({force:!0,prompt:!0}),children:F?"Refreshing…":"Refresh Subscription"})]})]}),_==="denied"&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notifications are blocked in your browser settings. Enable them manually and try again."})]})]},"application"),e.jsx(x,{id:"theme",title:"Theme Settings",description:"Switch between dark and light mode in one tap.",icon:j==="dark"?xe:he,tone:"muted",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:gap-4",children:[e.jsxs(i,{variant:j==="dark"?"default":"outline",onClick:()=>ee("dark"),className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{children:"Dark Mode"})]}),e.jsxs(i,{variant:j==="light"?"default":"outline",onClick:()=>ee("light"),className:"flex items-center space-x-2 border-border",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"Light Mode"})]})]})},"theme")]}),e.jsxs(z,{title:"Vendor Profile & Trading Rails",description:"Keep your public profile, payout instructions, and asset catalog ready for the next order.",children:[e.jsx(x,{id:"profile",title:"Profile Settings",description:"Refresh the vendor story buyers see in the bot.",icon:We,tone:"gradient",bodyClassName:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Full Name"}),e.jsx(p,{id:"name",value:h,onChange:s=>v(s.target.value),className:"bg-background border-border",disabled:b})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"telegram-username",children:"Telegram Username"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"@"}),e.jsx(p,{id:"telegram-username",placeholder:"your_handle",value:O,onChange:s=>G(s.target.value.replace(/^@+/,"")),className:"bg-background border-border",disabled:b})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Used in the bot for the “Contact Vendor” button."})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bio",children:"Short Bio (optional)"}),e.jsx(Z,{id:"bio",placeholder:"A short line customers will see in the bot",value:W,onChange:s=>Y(s.target.value),className:"bg-background border-border min-h-[72px]",disabled:b})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(l,{htmlFor:"profile-image",children:"Profile Image / Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[m&&e.jsx("img",{src:m,alt:"Profile",className:"h-16 w-16 rounded-lg object-cover"}),e.jsx(p,{id:"profile-image",type:"file",accept:"image/*",onChange:Pe,className:"bg-background border-border",disabled:b})]})]})})]})},"profile"),e.jsx(x,{id:"currency",title:"Currency Preferences",description:"Choose the currency to display on your dashboard and Telegram bot.",icon:M,tone:"muted",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currency-select",children:"Display Currency"}),e.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:"This currency will be used on your vendor dashboard and Telegram bot. Default is USD."}),e.jsx("select",{id:"currency-select",value:se,onChange:s=>q(s.target.value),className:"w-full rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground",disabled:b,children:ms().map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"⚠️ Changing this only affects the display format. Ensure your rates and prices reflect this currency choice."})]})},"currency"),e.jsxs(x,{id:"rates",title:"Assets & Rates",description:"Keep your assets, rates, and payout notes up to date.",icon:M,tone:"gradient",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-name",children:"Asset"}),e.jsx(p,{id:"settings-asset-name",value:String(c.asset||""),onChange:s=>f({...c,asset:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-buy-rate",children:"Buy Rate"}),e.jsx(p,{id:"settings-asset-buy-rate",type:"number",value:String(c.buy_rate||""),onChange:s=>f({...c,buy_rate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-sell-rate",children:"Sell Rate"}),e.jsx(p,{id:"settings-asset-sell-rate",type:"number",value:String(c.sell_rate||""),onChange:s=>f({...c,sell_rate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"settings-asset-contract",children:"Contract Address (optional)"}),e.jsx(p,{id:"settings-asset-contract",value:String(c.contract_address||""),onChange:s=>f({...c,contract_address:s.target.value})})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx(l,{htmlFor:"settings-asset-bank-details",children:"Bank Details (optional)"}),e.jsx(Z,{id:"settings-asset-bank-details",value:String(c.bank_details||""),onChange:s=>f({...c,bank_details:s.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:De,className:"bg-gradient-primary",children:[e.jsx(V,{className:"mr-1 h-4 w-4"})," ",k?"Update Asset":"Add Asset"]}),k&&e.jsx(i,{variant:"outline",onClick:()=>{Q(null),f({asset:"",buy_rate:"",sell_rate:"",contract_address:"",bank_details:""})},children:"Cancel"})]}),e.jsxs("div",{className:"space-y-2",children:[ie.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.asset}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Buy: ",s.buy_rate," • Sell: ",s.sell_rate]}),s.contract_address&&e.jsxs("p",{className:"text-xs",children:["Contract: ",s.contract_address]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"icon",variant:"outline",onClick:()=>{Q(s.id),f(s)},children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(i,{size:"icon",variant:"destructive",onClick:()=>Fe(s.id),children:e.jsx(fe,{className:"h-4 w-4"})})]})]},s.id)),ie.length===0&&e.jsx(be,{icon:E,badge:"Publish rails",title:"Add your first trading pair",description:"Buyers rely on this list to know what they can move with you. Set a spread, optional instructions, and the Telegram bot will handle the rest.",actions:e.jsxs(i,{variant:"secondary",onClick:()=>document.getElementById("settings-asset-name")?.focus(),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Add asset"]}),className:"bg-slate-950 text-left md:text-center"})]})]},"rates"),e.jsxs(x,{id:"auto-expire",title:"Orders Auto-Expiry",description:"Decide when pending orders self-clean your pipeline.",icon:T,tone:"gradient",bodyClassName:"max-w-xs space-y-2",children:[e.jsx(l,{htmlFor:"auto-expire-minutes",children:"Auto-expire after (minutes)"}),e.jsx(p,{id:"auto-expire-minutes",type:"number",min:1,placeholder:"e.g. 30",value:N,onChange:s=>{const t=s.target.value;R(t===""?"":Number(t))},className:"bg-background border-border",disabled:b}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave blank to use the global default."})]},"auto-expire"),e.jsxs(x,{id:"banks",title:"Bank Details / Payment Instructions",description:"Store payout profiles so payment instructions are one click away.",icon:M,tone:"gradient",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-default-instructions",children:"Default Instructions (optional)"}),e.jsx(Z,{id:"settings-bank-default-instructions",value:I,onChange:s=>y(s.target.value),className:"bg-background border-border min-h-[80px]",placeholder:"Generic instructions...",disabled:b})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-name",children:"Bank Name"}),e.jsx(p,{id:"settings-bank-name",value:String(d.bank_name||""),onChange:s=>g({...d,bank_name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-number",children:"Account Number"}),e.jsx(p,{id:"settings-bank-number",value:String(d.account_number||""),onChange:s=>g({...d,account_number:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-account-name",children:"Account Name"}),e.jsx(p,{id:"settings-bank-account-name",value:String(d.account_name||""),onChange:s=>g({...d,account_name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"settings-bank-instructions",children:"Instructions (optional)"}),e.jsx(p,{id:"settings-bank-instructions",value:String(d.instructions||""),onChange:s=>g({...d,instructions:s.target.value})})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs("label",{className:"flex items-center gap-2 text-sm",htmlFor:"settings-bank-default",children:[e.jsx("input",{id:"settings-bank-default",type:"checkbox",checked:!!d.is_default,onChange:s=>g({...d,is_default:s.target.checked})}),"Set as default"]})})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs(i,{onClick:Ue,className:"bg-gradient-primary",children:[e.jsx(V,{className:"mr-1 h-4 w-4"})," ",w?"Update Bank Detail":"Add Bank Detail"]}),w&&e.jsx(i,{variant:"outline",onClick:()=>{H(null),g({bank_name:"",account_number:"",account_name:"",instructions:"",is_default:!1})},children:"Cancel"})]}),e.jsxs("div",{className:"space-y-2",children:[ne.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.bank_name," • ",s.account_number]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.account_name,s.is_default?" • Default":""]}),s.instructions&&e.jsx("p",{className:"text-xs",children:s.instructions})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"icon",variant:"outline",onClick:()=>{H(s.id),g(s)},children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(i,{size:"icon",variant:"destructive",onClick:()=>Le(s.id),children:e.jsx(fe,{className:"h-4 w-4"})})]})]},s.id)),ne.length===0&&e.jsx(be,{icon:M,badge:"Payout ready",title:"Save a payout profile",description:"Make approvals instant by attaching verified banking instructions. Buyers get the details as soon as you accept.",actions:e.jsxs(i,{variant:"secondary",onClick:()=>document.getElementById("settings-bank-name")?.focus(),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Add bank profile"]}),className:"bg-slate-950 text-left md:text-center"})]})]},"banks")]}),e.jsx(z,{title:"Signals & Automations",description:"Guide the bot, nudge customers, and keep frontline communications in sync.",children:e.jsx(x,{id:"vendor-management",title:"Vendor Management",description:"Guide availability, broadcasts, and automated customer responses.",icon:T,tone:"gradient",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Auto-accept via Telegram Bot"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let Vendora hand customers your payment rails instantly and spin up transactions on autopilot whenever the Telegram bot captures a new order."}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:re,onChange:s=>K(s.target.checked)}),e.jsx("span",{className:"text-sm",children:"Auto-accept incoming trades and create transactions automatically"})]})})]}),e.jsx(i,{asChild:!0,variant:"ghost",className:"h-auto justify-start rounded-xl border border-border/60 bg-primary/5 p-4 text-left hover:bg-primary/10",children:e.jsx(S,{to:"/availability",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Availability Windows"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Broadcast when you're live so the Telegram bot knows when to pause hand-offs."})]})})}),e.jsx(i,{asChild:!0,variant:"ghost",className:"h-auto justify-start rounded-xl border border-border/60 bg-primary/5 p-4 text-left hover:bg-primary/10",children:e.jsx(S,{to:"/broadcast-messages",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Broadcast Studio"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send polished promos, downtime alerts, and rate drops to every buyer instantly."})]})})})]})},"vendor-management")})]}),e.jsx("div",{className:"h-4"}),e.jsx("div",{className:"sticky z-10",style:{bottom:"calc(var(--safe-area-bottom, 0px) + 1rem)"},children:e.jsx("div",{className:"flex justify-end",children:e.jsx(i,{onClick:Re,className:"bg-gradient-primary hover:opacity-90 shadow-md",disabled:ke,children:"Save All Settings"})})})]})};export{Ss as default};
